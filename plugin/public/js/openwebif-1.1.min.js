//******************************************************************************
//* openwebif.js: openwebif base module
//* Version 1.1
//******************************************************************************
//* Copyright (C) 2011-2014 E2OpenPlugins
//*
//* Authors: skaman <sandro # skanetwork.com>
//* 		 meo
//* 		 Homey-GER
//* 		 Cimarast
//* 		 Joerg Bleyel <jbleyel # gmx.net>
//* 		 Schimmelreiter
//* 		 plnick
//*
//* License GPL V2
//* https://github.com/E2OpenPlugins/e2openplugin-OpenWebif/blob/master/LICENSE.txt
//*******************************************************************************

function initJsTranslation(e){tstr_add_timer=e.add_timer,tstr_cancel=e.cancel,tstr_close=e.close,tstr_del_timer=e.delete_timer_question,tstr_del_autotimer=e.at_delete_autotimer_question,tstr_del_recording=e.delete_recording_question,tstr_ren_recording=e.rename_recording_question,tstr_done=e.done,tstr_edit_timer=e.edit_timer,tstr_hour=e.hour,tstr_save=e.save,tstr_minute=e.minute,tstr_nothing_play=e.nothing_play,tstr_now=e.now,tstr_on=e.on,tstr_reboot_box=e.reboot_box,tstr_rec_status=e.rec_status,tstr_restart_gui=e.restart_gui,tstr_standby=e.standby,tstr_start_after_end=e.start_after_end,tstr_time=e.time,tstr_zap_to=e.zap_to,tstr_january=e.month_01,tstr_february=e.month_02,tstr_march=e.month_03,tstr_april=e.month_04,tstr_may=e.month_05,tstr_june=e.month_06,tstr_july=e.month_07,tstr_august=e.month_08,tstr_september=e.month_09,tstr_october=e.month_10,tstr_november=e.month_11,tstr_december=e.month_12,tstr_monday=e.monday,tstr_tuesday=e.tuesday,tstr_wednesday=e.wednesday,tstr_thursday=e.thursday,tstr_friday=e.friday,tstr_saturday=e.saturday,tstr_sunday=e.sunday,tstr_mo=e.mo,tstr_tu=e.tu,tstr_we=e.we,tstr_th=e.th,tstr_fr=e.fr,tstr_sa=e.sa,tstr_su=e.su,tstr_loading=e.loading,tstr_stream=e.stream,tstr_transcoded=e.transcoded,tstr_send_message=e.send_message,tstr_sent_wait=e.sent_wait,tstr_epgsearch=e.epgsearch,tstr_bqe_del_channel_question=e.bqe_del_channel_question,tstr_bqe_del_bouquet_question=e.bqe_del_bouquet_question,tstr_bqe_name_bouquet=e.bqe_name_bouquet,tstr_bqe_name_marker=e.bqe_name_marker,tstr_bqe_rename_bouquet=e.bqe_rename_bouquet,tstr_bqe_rename_marker=e.bqe_rename_marker,tstr_bqe_filename=e.bqe_filename,tstr_bqe_restore_question=e.bqe_restore_question,tstr_timerlist=e.timer_list,tstr_timerpreview=e.timer_preview,tstr_timernewname=e.timer_newname,tstr_open_in_new_window=e.open_in_new_window}function wait_for_openwebif(){var e=window.setInterval(function(){$.getJSON("/api/statusinfo").success(function(){window.clearInterval(e),$("#modaldialog").dialog("close"),location.reload()})},2e3)}function handle_power_state_dialog(e){var t=0;$("#modaldialog").dialog("close"),2===e?(load_info_dialog("ajax/rebootdialog",tstr_reboot_box),wait_for_openwebif(),t=1e3):3===e&&(load_info_dialog("ajax/rebootdialog",tstr_restart_gui),wait_for_openwebif(),t=1e3),setTimeout(function(){webapi_execute("api/powerstate?newstate="+e)},t)}function load_info_dialog(e,t,n,r){var i="auto",o="auto";"undefined"!=typeof n&&(i=n),"undefined"!=typeof r&&(o=r),$.ajax({url:e,success:function(e){$("#modaldialog").html(e).dialog({modal:!0,title:t,autoOpen:!0,width:i,height:o,close:function(){$(this).dialog("destroy")}})},error:function(){alert("error! Loading Page")}})}function load_dm_spinner(e,t,n,r,i){var o="auto",a="auto";"undefined"!=typeof n&&(o=n),"undefined"!=typeof r&&(a=r),$("#modaldialog").html(loadspinner).dialog({modal:!0,title:t,autoOpen:!0,width:o,height:a,buttons:i,close:function(){$(this).dialog("destroy")},open:function(){$.ajax({url:e,success:function(e){$("#modaldialog").html(e)},error:function(){$("#modaldialog").html("error! Loading Page")}}),$(this).siblings(".ui-dialog-buttonpane").find("button:eq(0)").focus()}})}function load_dm(e,t,n,r){var i={};i[tstr_close]=function(){$(this).dialog("close")};var o="auto",a="auto";"undefined"!=typeof n&&(o=n),"undefined"!=typeof r&&(a=r),$.ajax({url:e,success:function(e){$("#modaldialog").html(e).dialog({modal:!0,title:t,autoOpen:!0,width:o,height:a,buttons:i,close:function(){$(this).dialog("destroy")},open:function(){$(this).siblings(".ui-dialog-buttonpane").find("button:eq(0)").focus()}})},error:function(){alert("error! Loading Page")}})}function load_message_dm(e,t){var n={};n[tstr_send_message]=function(){sendMessage()},n[tstr_cancel]=function(){$(this).dialog("close")},$.ajax({url:e,success:function(e){$("#modaldialog").html(e).dialog({modal:!0,title:t,autoOpen:!0,width:"auto",buttons:n,close:function(){$(this).dialog("destroy")}})}})}function dialog_notyet(){return $("#dialog").dialog("open"),!1}function load_tvcontent(e){return $("#tvcontent").load(e),!1}function load_tvcontent_spin(e){return $("#tvcontent").html(loadspinner).load(e),!1}function load_maincontent(e){return lastcontenturl!=e&&($("#content_container").load(e),lastcontenturl=e),!1}function load_maincontent_spin(e){if(lastcontenturl!=e){var t='<div id="content_main" style="min-height: 500px;">'+loadspinner+"</div>";$("#content_container").html(t).load(e),lastcontenturl=e}return!1}function webapi_execute(e,t){$.ajax(e).done(function(){"undefined"!=typeof t&&t()});return!1}function toggle_chan_des(e,t,n){var r="ajax/eventdescription?sref="+escape(t)+"&idev="+e,i="#"+n;$(i).load(r),$(i).slideToggle(200)}function open_epg_dialog(e,t){var n="ajax/epgdialog?sref="+escape(e),r=$(window).width()-100,i=$(window).height()-100,o={};o[tstr_close]=function(){$(this).dialog("close")},o[tstr_open_in_new_window]=function(){$(this).dialog("close"),open_epg_pop(e)},load_dm_spinner(n,t,r,i,o)}function open_epg_pop(e){var t="ajax/epgpop?sref="+escape(e);$.popupWindow(t,{height:500,width:900,toolbar:!1,scrollbars:!0})}function open_epg_search_dialog(){var e=$("#epgSearch").val(),t="ajax/epgdialog?sstr="+encodeURIComponent(e);$("#epgSearch").val("");var n=$(window).width()-100,r=$(window).height()-100,i={};i[tstr_close]=function(){$(this).dialog("close")},i[tstr_open_in_new_window]=function(){$(this).dialog("close"),open_epg_search_pop(e)},load_dm_spinner(t,tstr_epgsearch,n,r,i)}function open_epg_search_pop(e){var t="ajax/epgpop?sstr="+encodeURIComponent(e);$.popupWindow(t,{height:500,width:900,toolbar:!1,scrollbars:!0})}function addTimerEvent(e,t){webapi_execute("/api/timeraddbyeventid?sRef="+e+"&eventid="+t,function(){alert("Timer Added")})}function addTimerEventPlay(e,t){webapi_execute("/api/timeraddbyeventid?sRef="+e+"&eventid="+t+"&eit=0&disabled=0&justplay=1&afterevent=3",function(){alert("Timer Added")})}function addEditTimerEvent(e,t){var n="/api/event?sref="+e+"&idev="+t;$.getJSON(n,function(e){"undefined"!=typeof e&&"undefined"!=typeof e.event?addTimer(e.event):alert("Event not found")})}function addAutoTimerEvent(e,t,n,r,i){at2add={name:n,from:r,to:i,sref:e,sname:t},load_maincontent("ajax/at"),$("#modaldialog").dialog("destroy")}function delTimerEvent(){}function toggleTimerStatus(e,t,n){var r="/api/timertogglestatus?",i={sRef:e,begin:t,end:n};$.getJSON(r,i,function(e){var r=$("#img-"+t+"-"+n);r.removeClass("ow_i_disabled"),r.removeClass("ow_i_enabled"),r.addClass(e.disabled?"ow_i_disabled":"ow_i_enabled")})}function deleteTimer(e,t,n,r){var i=decodeURIComponent(r);confirm(tstr_del_timer+": "+i)===!0&&webapi_execute("/api/timerdelete?sRef="+e+"&begin="+t+"&end="+n,function(){$("#"+t+"-"+n).remove()})}function cleanupTimer(){webapi_execute("/api/timercleanup",function(){load_maincontent("/ajax/timers")})}function renameMovie(e,t){var n=prompt(tstr_ren_recording,t);n&&n!=t&&webapi_execute("/api/movierename?sRef="+e+"&newname="+n)}function deleteMovie(e,t,n){confirm(tstr_del_recording+": "+n)===!0&&(webapi_execute("/api/moviedelete?sRef="+e),$("#"+t).remove())}function playRecording(e){var t=e.replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\//g,"%2F");console.debug(t);var n="/api/zap?sRef="+t;$.getJSON(n,function(){$("#osd").html(" "),$("#osd_bottom").html(" ")})}function zapChannel(e,t){var n="/api/zap?sRef="+escape(e);$.getJSON(n,function(){$("#osd").html(tstr_zap_to+": "+t),$("#osd_bottom").html(" ")})}function toggleStandby(){shiftbutton&&webapi_execute("api/set_powerup_without_waking_tv"),webapi_execute("api/powerstate?newstate=0"),setTimeout(getStatusInfo,1500)}function getStatusInfo(){$.ajaxSetup({cache:!1}),$.getJSON("/api/statusinfo").success(function(e){if($("#slider").slider("value",e.volume),$("#amount").val(e.volume),1==e.muted?(mutestatus=1,$("#volimage").attr("src","/images/volume_mute.png")):(mutestatus=0,$("#volimage").attr("src","/images/volume.png")),!e.currservice_station||-1===e.currservice_serviceref.indexOf("1:0:1")&&-1===e.currservice_serviceref.indexOf("1:134:1"))if(!e.currservice_station||-1===e.currservice_serviceref.indexOf("1:0:2")&&-1===e.currservice_serviceref.indexOf("1:134:2"))if(e.currservice_station&&-1!==e.currservice_serviceref.indexOf("1:0:0")){var t="";e.transcoding?(t+="<a href='#' onclick=\"jumper80('"+e.currservice_filename+"')\"; title='"+tstr_stream+": "+e.currservice_station+"'><img src='../images/ico_stream.png'></img></a>&nbsp;",t+="<a href='#' onclick=\"jumper8003('"+e.currservice_filename+"')\"; title='"+tstr_stream+" ("+tstr_transcoded+"): "+e.currservice_station+"'><img src='../images/ico_stream02.png'></img></a>&nbsp;"):t+="<a target='_blank' href='/web/ts.m3u?file="+e.currservice_filename+"' title='"+tstr_stream+": "+e.currservice_station+"'><img src='../images/ico_stream.png'></img></a>&nbsp;",$("#osd").html(t+"<span style='color:#EA7409;font-weight:bold;'>"+e.currservice_station+"</span>&nbsp;&nbsp;"+e.currservice_begin+" - "+e.currservice_end+"&nbsp;&nbsp;"+e.currservice_name),$("#osd_bottom").html(e.currservice_description)}else e.currservice_station?($("#osd").html("<span style='color:#EA7409;font-weight:bold;'>"+e.currservice_station+"</span>&nbsp;&nbsp;"+e.currservice_begin+" - "+e.currservice_end+"&nbsp;&nbsp;"+e.currservice_name),$("#osd_bottom").html(e.currservice_description)):($("#osd").html(tstr_nothing_play),$("#osd_bottom").html(""));else{var t="";t+="<a target='_blank' href='/web/stream.m3u?ref="+e.currservice_serviceref+"&name="+e.currservice_station+"' title='"+tstr_stream+": "+e.currservice_station+"'><img src='../images/ico_stream.png'></img></a>&nbsp;",$("#osd").html(t+"<span style='color:#EA7409;font-weight:bold;'><a style='color:#EA7409;font-weight:bold;text-decoration:none;' href='#' onClick='load_maincontent(\"ajax/radio\");return false;'>"+e.currservice_station+"</a></span>&nbsp;&nbsp;"+e.currservice_begin+" - "+e.currservice_end+"&nbsp;&nbsp;<a style='color:#ffffff;text-decoration:none;' href=\"#\" onclick=\"open_epg_pop('"+e.currservice_serviceref+"')\" title='"+e.currservice_fulldescription+"'>"+e.currservice_name+"</a>"),$("#osd_bottom").html(e.currservice_description)}else{var t="";e.transcoding?(t+="<a href='#' onclick=\"jumper8001('"+e.currservice_serviceref+"', '"+e.currservice_station+"')\"; title='"+tstr_stream+": "+e.currservice_station+"'><img src='../images/ico_stream.png'></img></a>&nbsp;",t+="<a href='#' onclick=\"jumper8002('"+e.currservice_serviceref+"', '"+e.currservice_station+"')\"; title='"+tstr_stream+" ("+tstr_transcoded+"): "+e.currservice_station+"'><img src='../images/ico_stream02.png'></img></a>&nbsp;"):t+="<a target='_blank' href='/web/stream.m3u?ref="+e.currservice_serviceref+"&name="+e.currservice_station+"' title='"+tstr_stream+": "+e.currservice_station+"'><img src='../images/ico_stream.png'></img></a>&nbsp;",$("#osd").html(t+"<span style='color:#EA7409;font-weight:bold'><a style='color:#EA7409;font-weight:bold;text-decoration:none;' href='#' onClick='load_maincontent(\"ajax/tv\");return false;'>"+e.currservice_station+"</a></span>&nbsp;&nbsp;"+e.currservice_begin+" - "+e.currservice_end+"&nbsp;&nbsp;<a style='color:#ffffff;text-decoration:none;' href=\"#\" onclick=\"open_epg_pop('"+e.currservice_serviceref+"')\" title='"+e.currservice_fulldescription+"'>"+e.currservice_name+"</a>"),$("#osd_bottom").html(e.currservice_description)}var n="";if("true"==e.isRecording){n="<a href='#' onClick='load_maincontent(\"ajax/timers\"); return false;'><img src='../images/ico_rec.png' title='"+tstr_rec_status+e.Recording_list+"' alt='"+tstr_rec_status+"' /></a>"}n+="<a href='#' onClick='toggleStandby();return false'><img src='../images/ico_",n+="true"==e.inStandby?"standby.png' title='"+tstr_on+"' alt='"+tstr_standby:"on.png' title='"+tstr_standby+"' alt='"+tstr_on,n+="' width='58' height='24' /></a>",$("#osd_status").html(n)}).error(function(){$("#osd, #osd_bottom").html("")})}function grabScreenshot(e){$("#screenshotspinner").show(),$("#screenshotimage").load(function(){$("#screenshotspinner").hide()}),"auto"!=e?screenshotMode=e:e=screenshotMode,timestamp=(new Date).getTime(),$("#screenshotRefreshHD").is(":checked")?$("#screenshotimage").attr("src","/grab?format=jpg&mode="+e+"&timestamp="+timestamp):$("#screenshotimage").attr("src","/grab?format=jpg&r=700&mode="+e+"&timestamp="+timestamp),$("#screenshotimage").attr("width",700)}function getMessageAnswer(){$.getJSON("/api/messageanswer",function(e){$("#messageSentResponse").html(e.message)})}function countdowngetMessage(){return MessageAnswerCounter--,3>MessageAnswerCounter?void getMessageAnswer():($("#messageSentResponse").html(tstr_sent_wait+" "+MessageAnswerCounter),void setTimeout(countdowngetMessage,1e3))}function sendMessage(){var e=$("#messageText").val(),t=$("#messageType").val(),n=$("#messageTimeout").val();$.getJSON("/api/message?text="+e+"&type="+t+"&timeout="+n,function(e){$("#messageSentResponse").html(e.message),0==t&&(MessageAnswerCounter=n,setTimeout(countdowngetMessage,1e3))})}function toggleMenu(e){var t="#leftmenu_expander_"+e,n="#leftmenu_container_"+e;$(t).hasClass("leftmenu_icon_collapse")?($(t).removeClass("leftmenu_icon_collapse"),$(n).show("fast"),webapi_execute("/api/expandmenu?name="+e)):($(t).addClass("leftmenu_icon_collapse"),$(n).hide("fast"),webapi_execute("/api/collapsemenu?name="+e))}function callScreenShot(){$("input[name=remotegrabscreen]").is(":checked")&&("ajax/screenshot"==lastcontenturl?grabScreenshot(screenshotMode):load_maincontent("ajax/screenshot"))}function pressMenuRemote(e){webapi_execute(shiftbutton?"/api/remotecontrol?type=long&command="+e:"/api/remotecontrol?command="+e),grabTimer>0&&clearTimeout(grabTimer),grabTimer=setTimeout("callScreenShot()",1e3)}function toggleFullRemote(){$("#menucontainer").toggle(),$("#remotecontainer").toggle()}function saveConfig(e,t){webapi_execute("/api/saveconfig?key="+escape(e)+"&value="+escape(t)),"config.usage.setup_level"==e&&$("#content_container").load(lastcontenturl)}function numberTextboxKeydownFilter(e){46!=e.keyCode&&8!=e.keyCode&&9!=e.keyCode&&(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}function initTimerEdit(){$.ajax({async:!1,url:"/api/getallservices",success:function(e){if(services=$.parseJSON(e),services.result){$("#bouquet_select").find("option").remove().end();for(var t in services.services){service=services.services[t];for(var n in service.subservices)subservice=service.subservices[n],$("#bouquet_select").append($("<option></option>").attr("value",subservice.servicereference).text(subservice.servicename))}}}}),$.ajax({async:!1,url:"/api/getlocations",success:function(e){if(locs=$.parseJSON(e),locs.result){$("#dirname").find("option").remove().end(),$("#dirname").append($("<option></option>").attr("value","None").text("Default"));for(var t in locs.locations)loc=locs.locations[t],$("#dirname").append($("<option></option>").attr("value",loc).text(loc))}}}),$.ajax({async:!1,url:"/api/gettags",success:function(e){if(tags=$.parseJSON(e),tags.result){for(var t in tags.tags)tag=tags.tags[t],$("#tagsnew").append("<input type='checkbox' name='tagsnew' value='"+tag+"' id='tag_"+tag+"'/><label for='tag_"+tag+"'>"+tag+"</label>");$("#tagsnew").buttonset()}}}),timeredit_initialized=!0}function checkVPS(){$("#vpsplugin_enabled").is(":checked")?($("#vpsplugin_safemode").show(),$("#has_vpsplugin2").show()):($("#vpsplugin_safemode").hide(),$("#has_vpsplugin2").hide())}function initTimerEditBegin(){$("#timerbegin").datetimepicker({timeText:tstr_time,hourText:tstr_hour,minuteText:tstr_minute,currentText:tstr_now,closeText:tstr_done,monthNames:[tstr_january,tstr_february,tstr_march,tstr_april,tstr_may,tstr_june,tstr_july,tstr_august,tstr_september,tstr_october,tstr_november,tstr_december],dayNames:[tstr_sunday,tstr_monday,tstr_tuesday,tstr_wednesday,tstr_thursday,tstr_friday,tstr_saturday,tstr_sunday],dayNamesMin:[tstr_su,tstr_mo,tstr_tu,tstr_we,tstr_th,tstr_fr,tstr_sa,tstr_su],dateFormat:"dd.mm.yy",timeFormat:"hh:mm",onClose:function(){""!=$("#timerend").val()&&$(this).datetimepicker("getDate")>$("#timerend").datetimepicker("getDate")?($("#error").text(tstr_start_after_end),$("#errorbox").show()):$("#errorbox").hide()}})}function editTimer(e,t,n){e=decodeURI(e),current_serviceref=e,current_begin=t,current_end=n,timeredit_initialized||initTimerEdit(),timeredit_begindestroy&&(initTimerEditBegin(),timeredit_begindestroy=!1),$.ajax({async:!1,url:"/api/timerlist",success:function(r){if(timers=$.parseJSON(r),timers.result)for(var i in timers.timers)if(timer=timers.timers[i],timer.serviceref==e&&Math.round(timer.begin)==Math.round(t)&&Math.round(timer.end)==Math.round(n)){$("#timername").val(timer.name),$("#description").val(timer.description),$("#bouquet_select").val(timer.serviceref),$("#dirname").val(timer.dirname),$("#enabled").prop("checked",0==timer.disabled),$("#justplay").prop("checked",timer.justplay),$("#afterevent").val(timer.afterevent),$("#errorbox").hide();for(var o=timer.repeated,a=0;7>a;a++)$("#day"+a).attr("checked",1==(1&o)),o>>=1;$("#repeatdays").buttonset("refresh"),$("#tagsnew").find("input").attr("checked",!1);for(var s=timer.tags.split(" "),c=0;c<s.length;c++)$("#tag_"+s[c]).attr("checked",!0);$("#tagsnew").buttonset("refresh"),$("#timerbegin").datetimepicker("setDate",new Date(1e3*Math.round(timer.begin))),$("#timerend").datetimepicker("setDate",new Date(1e3*Math.round(timer.end)));var d=2===timer.state;d?($("#timerbegin").datetimepicker("destroy"),timeredit_begindestroy=!0,$("#timerbegin").addClass("ui-state-disabled"),$("#timername").addClass("ui-state-disabled"),$("#dirname option").not(":selected").attr("disabled","disabled"),$("#bouquet_select option").not(":selected").attr("disabled","disabled")):($("#timername").removeClass("ui-state-disabled"),$("#timerbegin").removeClass("ui-state-disabled"),$("#dirname option").removeAttr("disabled"),$("#bouquet_select option").removeAttr("disabled")),$("#timerbegin").prop("readonly",d),$("#timername").prop("readonly",d),"undefined"!=typeof timer.vpsplugin_enabled?($("#vpsplugin_enabled").prop("checked",timer.vpsplugin_enabled),$("#vpsplugin_safemode").prop("checked",!timer.vpsplugin_overwrite),$("#has_vpsplugin1").show(),checkVPS()):$("#has_vpsplugin1").hide(),$("#editTimerForm").dialog("open"),$("#editTimerForm").dialog("option","title",tstr_edit_timer+" - "+timer.name);break}}})}function addTimer(e,t,n){current_serviceref="",current_begin=-1,current_end=-1;var r=-1,i=-1,o="",a="",s="",c=0,d=0;"undefined"!=typeof e&&""!=e&&(r=e.begin,i=e.begin+e.duration,o=e.sref,a=e.title,s=e.shortdesc,c=e.recording_margin_before,d=e.recording_margin_after);var u=$("#bouquet_select > option").length;(!timeredit_initialized||2>u)&&initTimerEdit(),"undefined"!=typeof t&&"undefined"!=typeof n&&(o=t,a=n,$("#bouquet_select").append($("<option></option>").attr("value",o).text(n))),$("#timername").val(a),$("#description").val(s),$("#dirname").val("None"),$("#enabled").prop("checked",!0),$("#justplay").prop("checked",!1),$("#afterevent").val(3),$("#errorbox").hide();for(var l=0;7>l;l++)$("#day"+l).attr("checked",!1);$("#repeatdays").buttonset("refresh"),$("#tagsnew").find("input").attr("checked",!1),$("#tagsnew").buttonset("refresh");var m=-1!==r?new Date(1e3*(Math.round(r)-60*c)):new Date;$("#timerbegin").datetimepicker("setDate",m);var _=new Date(-1!==i?1e3*(Math.round(i)+60*d):m.getTime()+36e5);$("#timerend").datetimepicker("setDate",_),$("#bouquet_select").val(o),$("#editTimerForm").dialog("open"),$("#editTimerForm").dialog("option","title",tstr_add_timer),$("#editTimerForm").dialog("option","height","auto")}function InitAccordeon(e){$(e).accordion({active:!1,change:function(e,t){t.oldContent.empty(),t.oldContent.html(tstr_loading+" ..."),t.newContent.load(t.newHeader.find("a").attr("id"))},autoHeight:!1,collapsible:!0})}function InitBouquets(e){var t="";e===!0?($("#btn0").click(function(){$("#tvcontent").html(loadspinner).load("ajax/current")}),$("#btn5").click(function(){$("#tvcontent").html(loadspinner).load("ajax/multiepg")})):t="?stype=radio",$("#btn1").click(function(){$("#tvcontent").html(loadspinner).load("ajax/bouquets"+t)}),$("#btn2").click(function(){$("#tvcontent").html(loadspinner).load("ajax/providers"+t)}),$("#btn3").click(function(){$("#tvcontent").load("ajax/satellites"+t)}),$("#btn4").click(function(){$("#tvcontent").html(loadspinner).load("ajax/channels"+t)}),$("#tvbutton").buttonset(),$("#tvcontent").load("ajax/bouquets"+t)}function getWinSize(e){e||(e=window);var t={};return"undefined"!=typeof e.innerWidth?(t.screenWidth=e.screen.width,t.screenHeight=e.screen.height):(t.screenWidth=0,t.screenHeight=0),t}function getDeviceType(){var e=getWinSize(),t=e.screenHeight>e.screenWdith?e.screenHeight:e.screenWidth;return 500>t?"phone":"tab"}function getOSType(){var e=navigator.userAgent;return e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("ipod")>-1||e.indexOf("iphone")>-1||e.indexOf("ipad")>-1?"ios":e.indexOf("Android")>-1||e.indexOf("android")>-1?"android":e.indexOf("BlackBerry")>-1||e.indexOf("blackberry")>-1?"blackberry":"unknown"}function jumper80(e){getDeviceType();document.portFormTs.file.value=e,document.portFormTs.device.value="etc",document.portFormTs.submit()}function jumper8003(e){getDeviceType();document.portFormTs.file.value=e,document.portFormTs.device.value="phone",document.portFormTs.submit()}function jumper8002(e,t){getDeviceType();document.portForm.ref.value=e,document.portForm.name.value=t,document.portForm.device.value="phone",document.portForm.submit()}function jumper8001(e,t){getDeviceType();document.portForm.ref.value=e,document.portForm.name.value=t,document.portForm.device.value="etc",document.portForm.submit()}$.fx.speeds._default=1e3;var loadspinner="<div id='spinner' ><img src='../images/spinner.gif' alt='loading...' /></div>",mutestatus=0,lastcontenturl=null,screenshotMode="all",MessageAnswerCounter=0,shiftbutton=!1,grabTimer=0,at2add=null;$(function(){$("#dialog").dialog({autoOpen:!1,show:"fade",hide:"explode",buttons:{Ok:function(){$(this).dialog("close")}}}),$("#volimage").click(function(){0===mutestatus?(mutestatus=1,$("#volimage").attr("src","/images/volume_mute.png")):(mutestatus=0,$("#volimage").attr("src","/images/volume.png")),$.ajax("web/vol?set=mute")}),getStatusInfo(),setInterval("getStatusInfo()",15e3),$("#slider").slider({range:"min",min:0,max:100,value:40,slide:function(e,t){$("#amount").val(t.value)},stop:function(e,t){0==t.value?$("#volimage").attr("src","/images/volume_mute.png"):$("#volimage").attr("src","/images/volume.png");$.ajax("web/vol?set=set"+t.value);return!1}}),$("#amount").val($("#slider").slider("value")),$(".epgsearch button:first").button({icons:{primary:"ui-icon-search"}})}),function(e){var t={height:500,width:500,toolbar:!1,scrollbars:!1,status:!1,resizable:!1,left:0,top:0,center:!0,createNew:!0,location:!1,menubar:!1,onUnload:null};e.popupWindow=function(n,r){var i=e.extend({},t,r);i.center&&(i.top=(screen.height-i.height)/2-50,i.left=(screen.width-i.width)/2);var o=[];o.push("location="+(i.location?"yes":"no")),o.push("menubar="+(i.menubar?"yes":"no")),o.push("toolbar="+(i.toolbar?"yes":"no")),o.push("scrollbars="+(i.scrollbars?"yes":"no")),o.push("status="+(i.status?"yes":"no")),o.push("resizable="+(i.resizable?"yes":"no")),o.push("height="+i.height),o.push("width="+i.width),o.push("left="+i.left),o.push("top="+i.top);var a=(new Date).getTime(),s=i.createNew?"popup_window_"+a:"popup_window",c=window.open(n,s,o.join(","));if(i.onUnload&&"function"==typeof i.onUnload)var d=setInterval(function(){(!c||c.closed)&&(clearInterval(d),i.onUnload())},250);return c&&c.focus&&c.focus(),c}}(jQuery),$(function(){$("input[name=remotegrabscreen]").click(function(e){$("input[name=remotegrabscreen]").attr("checked",e.currentTarget.checked),webapi_execute("/api/remotegrabscreenshot?checked="+e.currentTarget.checked)})}),$(function(){$("input[name=zapstream]").click(function(e){$("input[name=zapstream]").attr("checked",e.currentTarget.checked),webapi_execute("/api/zapstream?checked="+e.currentTarget.checked)})}),$(window).keydown(function(e){16==e.which&&(shiftbutton=!0)}).keyup(function(e){16==e.which&&(shiftbutton=!1)});var current_serviceref,current_begin,current_end,timeredit_initialized=!1,timeredit_begindestroy=!1;
